<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Assets</title>
    <style>
      td {
        vertical-align: middle;
      }
    </style>
    <link rel="stylesheet" href="./assets/css/font-awesome-6.4-all.min.css" />
    <link rel="stylesheet" href="./assets/css/bootstrap-5.3-rtl.min.css" />
  </head>

  <body class="p-2">
    <main class="container">
      <section id="css" class="bg-primary-subtle rounded p-1 mb-0 mb-5">
        <h2 class="fw-bold text-center mt-2 fs-3">CSS</h2>
        <hr />
        <table class="table mb-0 table-responsive table-hover">
          <tbody></tbody>
        </table>
      </section>
      <section id="js" class="bg-warning-subtle rounded p-1">
        <h2 class="fw-bold text-center mt-2 fs-3">JS</h2>
        <hr />
        <table class="table mb-0 table-responsive table-hover">
          <tbody></tbody>
        </table>
      </section>
    </main>
    <script src="./assets/js/bootstrap-5.3-bundle.min.js"></script>
    <script>
      const css = document.querySelectorAll('link[rel="stylesheet"]');
      const js = document.querySelectorAll('script[src]');
      const cssSection = document.getElementById('css');
      const jsSection = document.getElementById('js');

      function copyUrl(el) {
        const url = el.parentElement.previousElementSibling.textContent;
        navigator.clipboard.writeText(url);
        el.style.backgroundColor = 'green';
        setTimeout(() => {
          el.style.backgroundColor = '#0d6efd';
        }, 1000);
      }

      function addToUi(file) {
        const isCss = file.href ? true : false;
        const table = isCss
          ? cssSection.lastElementChild.firstElementChild
          : jsSection.lastElementChild.firstElementChild;
        const html = `
          <tr>
            <td>${
              isCss ? file.href.split('/').at(-1) : file.src.split('/').at(-1)
            }</td>
            <td>${isCss ? file.href : file.src}</td>
            <td>
              <button class="btn btn-primary" type="button" onclick="copyUrl(this)">Copy</button>
            </td>
          </tr>
          `;
        table.insertAdjacentHTML('beforeend', html);
      }

      [...css, ...js].forEach(file => {
        addToUi(file);
      });
    </script>
  </body>
</html>
